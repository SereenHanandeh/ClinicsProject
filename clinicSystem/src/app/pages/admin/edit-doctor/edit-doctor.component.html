<form [formGroup]="doctorForm" (ngSubmit)="onSubmit()" class="form-container">
  <label>Name:</label>
  <input formControlName="name" type="text" />
  <div *ngIf="f['name'].touched && f['name'].invalid" class="text-red-600 text-sm">
    <div *ngIf="f['name'].errors?.['required']">Name is required</div>
    <div *ngIf="f['name'].errors?.['minlength']">Name must be at least 3 characters long</div>
  </div>

  <label>Email:</label>
  <input formControlName="email" type="email" />
  <div *ngIf="f['email'].touched && f['email'].invalid" class="text-red-600 text-sm">
    <div *ngIf="f['email'].errors?.['required']">Email is required</div>
    <div *ngIf="f['email'].errors?.['email']">Invalid email format</div>
  </div>

  <label>Phone:</label>
  <input formControlName="phone" type="text" />
  <div *ngIf="f['phone'].touched && f['phone'].invalid" class="text-red-600 text-sm">
    <div *ngIf="f['phone'].errors?.['required']">Phone is required</div>
    <div *ngIf="f['phone'].errors?.['pattern']">Phone must be 10 to 15 digits</div>
  </div>

  <label>Specialization:</label>
  <input formControlName="specification" type="text" />
  <div *ngIf="f['specification'].touched && f['specification'].invalid" class="text-red-600 text-sm">
    <div *ngIf="f['specification'].errors?.['required']">Specialization is required</div>
    <div *ngIf="f['specification'].errors?.['minlength']">Specialization must be at least 3 characters long</div>
  </div>

  <label>Clinic:</label>
  <select formControlName="clinicId">
    <option value="">Select a clinic</option>
    <option *ngFor="let clinic of clinics" [value]="clinic.id">{{ clinic.name }}</option>
  </select>
  <div *ngIf="f['clinicId'].touched && f['clinicId'].invalid" class="text-red-600 text-sm">
    <div *ngIf="f['clinicId'].errors?.['required']">Clinic selection is required</div>
  </div>

  <button type="submit" [disabled]="loading">Update Doctor</button>

  <div *ngIf="errorMessage" class="error text-red-600 mt-2">{{ errorMessage }}</div>
</form>

<!-- Success Modal -->

<div *ngIf="showSuccessModal" class="side-modal-overlay">
  <div class="side-modal">
    <h2>Success!</h2>
    <p>Doctor updated successfully. Redirecting...</p>
    <div class="progress-bar">
      <div class="progress" [style.width.%]="progressBarWidth"></div>
    </div>
  </div>
</div>
